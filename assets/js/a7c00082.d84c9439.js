"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5356],{1698:(t,e,l)=>{l.r(e),l.d(e,{assets:()=>o,contentTitle:()=>r,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"customize_cozie_app/custom_backend/backend_push_notifications","title":"Sending Push Notifications","description":"Overview","source":"@site/docs/7_customize_cozie_app/03_custom_backend/05_push_notifications.md","sourceDirName":"7_customize_cozie_app/03_custom_backend","slug":"/customize_cozie_app/custom_backend/backend_push_notifications","permalink":"/docs/customize_cozie_app/custom_backend/backend_push_notifications","draft":false,"unlisted":false,"editUrl":"https://github.com/cozie-app/cozie-apple-website/tree/master/docs/7_customize_cozie_app/03_custom_backend/05_push_notifications.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"id":"backend_push_notifications","title":"Sending Push Notifications","sidebar_label":"Push Notifications"},"sidebar":"myAutogeneratedSidebar","previous":{"title":"Retrieving data","permalink":"/docs/customize_cozie_app/custom_backend/backend_retrieving_cozie_data"},"next":{"title":"Troubleshooting","permalink":"/docs/troubleshooting"}}');var n=l(4848),s=l(8453),d=l(6025);const c={id:"backend_push_notifications",title:"Sending Push Notifications",sidebar_label:"Push Notifications"},r=void 0,o={},a=[{value:"Overview",id:"overview",level:2},{value:"Lambda function code",id:"lambda-function-code",level:2},{value:"Lambda configuration",id:"lambda-configuration",level:3}];function x(t){const e={a:"a",h2:"h2",h3:"h3",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...t.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("img",{alt:"Data flow for push notifications",src:(0,d.Ay)("img/backend/backend_push_notification.jpg"),width:"60%"}),"\n",(0,n.jsx)(e.h2,{id:"overview",children:"Overview"}),"\n",(0,n.jsx)(e.p,{children:"We use OneSignal as a push notification service provider. We offer an API to send push notifications to Cozie.\nIf you want to send push notifications to Cozie independent of us, you will need to copy the Cozie source code and publish your own version of the Cozie app, while doing so you need to setup your own OneSignal account and replace the OneSignal credentials in the Cozie source code."}),"\n",(0,n.jsx)(e.h2,{id:"lambda-function-code",children:"Lambda function code"}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:"https://github.com/cozie-app/cozie-apple-backend/tree/main/lambda_cozie-apple-v3-researcher-push-notification",children:"cozie-apple-v3-researcher-push-notification"})}),"\n"]}),"\n",(0,n.jsx)(e.h3,{id:"lambda-configuration",children:"Lambda configuration"}),"\n",(0,n.jsxs)(e.table,{children:[(0,n.jsx)(e.thead,{children:(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.th,{style:{textAlign:"left"},children:"Configuration"}),(0,n.jsx)(e.th,{style:{textAlign:"left"},children:"Value"}),(0,n.jsx)(e.th,{style:{textAlign:"left"},children:"Comment"})]})}),(0,n.jsxs)(e.tbody,{children:[(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{style:{textAlign:"left"},children:(0,n.jsx)(e.strong,{children:"General configuration"})}),(0,n.jsx)(e.td,{style:{textAlign:"left"}}),(0,n.jsx)(e.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{style:{textAlign:"left"},children:"Memory"}),(0,n.jsx)(e.td,{style:{textAlign:"left"},children:"512 MB"}),(0,n.jsx)(e.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{style:{textAlign:"left"},children:"Ephemeral storage"}),(0,n.jsx)(e.td,{style:{textAlign:"left"},children:"512 MB"}),(0,n.jsx)(e.td,{style:{textAlign:"left"},children:"default value"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{style:{textAlign:"left"},children:"Timeout"}),(0,n.jsx)(e.td,{style:{textAlign:"left"},children:"0 min 10 sec"}),(0,n.jsx)(e.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{style:{textAlign:"left"}}),(0,n.jsx)(e.td,{style:{textAlign:"left"}}),(0,n.jsx)(e.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{style:{textAlign:"left"},children:(0,n.jsx)(e.strong,{children:"Triggers"})}),(0,n.jsx)(e.td,{style:{textAlign:"left"}}),(0,n.jsx)(e.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{style:{textAlign:"left"},children:"API Gateway"}),(0,n.jsx)(e.td,{style:{textAlign:"left"},children:"cozie-apple-v3-researcher-api"}),(0,n.jsx)(e.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{style:{textAlign:"left"}}),(0,n.jsx)(e.td,{style:{textAlign:"left"}}),(0,n.jsx)(e.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{style:{textAlign:"left"},children:(0,n.jsx)(e.strong,{children:"Environment variables"})}),(0,n.jsx)(e.td,{style:{textAlign:"left"}}),(0,n.jsx)(e.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{style:{textAlign:"left"},children:"DB_HOST"}),(0,n.jsx)(e.td,{style:{textAlign:"left"},children:"XXX.influxcloud.net"}),(0,n.jsx)(e.td,{style:{textAlign:"left"},children:"(replace 'XXX')"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{style:{textAlign:"left"},children:"DB_NAME"}),(0,n.jsx)(e.td,{style:{textAlign:"left"},children:"cozie-apple"}),(0,n.jsx)(e.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{style:{textAlign:"left"},children:"DB_PASSWORD"}),(0,n.jsx)(e.td,{style:{textAlign:"left"},children:"XXX"}),(0,n.jsx)(e.td,{style:{textAlign:"left"},children:"(replace 'XXX')"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{style:{textAlign:"left"},children:"DB_PORT"}),(0,n.jsx)(e.td,{style:{textAlign:"left"},children:"8086"}),(0,n.jsx)(e.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{style:{textAlign:"left"},children:"DB_USER"}),(0,n.jsx)(e.td,{style:{textAlign:"left"},children:"Cozie-Apple-Lambda-API-Push-Notification"}),(0,n.jsx)(e.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{style:{textAlign:"left"},children:"onesignal_app_id"}),(0,n.jsx)(e.td,{style:{textAlign:"left"},children:"XXX"}),(0,n.jsx)(e.td,{style:{textAlign:"left"},children:"(replace 'XXX')"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{style:{textAlign:"left"},children:"onesignal_token"}),(0,n.jsx)(e.td,{style:{textAlign:"left"},children:"XXX"}),(0,n.jsx)(e.td,{style:{textAlign:"left"},children:"(replace 'XXX')"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{style:{textAlign:"left"}}),(0,n.jsx)(e.td,{style:{textAlign:"left"}}),(0,n.jsx)(e.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{style:{textAlign:"left"},children:(0,n.jsx)(e.strong,{children:"Layers"})}),(0,n.jsx)(e.td,{style:{textAlign:"left"}}),(0,n.jsx)(e.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{style:{textAlign:"left"},children:"AWSSDKPandas-Python311"}),(0,n.jsx)(e.td,{style:{textAlign:"left"}}),(0,n.jsx)(e.td,{style:{textAlign:"left"},children:"AWS Layer for Pandas, Numpy, requests"})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{style:{textAlign:"left"},children:"Influx"}),(0,n.jsx)(e.td,{style:{textAlign:"left"}}),(0,n.jsx)(e.td,{style:{textAlign:"left"},children:"Custom layer for InfluxDB client"})]})]})]})]})}function h(t={}){const{wrapper:e}={...(0,s.R)(),...t.components};return e?(0,n.jsx)(e,{...t,children:(0,n.jsx)(x,{...t})}):x(t)}},8453:(t,e,l)=>{l.d(e,{R:()=>d,x:()=>c});var i=l(6540);const n={},s=i.createContext(n);function d(t){const e=i.useContext(s);return i.useMemo(function(){return"function"==typeof t?t(e):{...e,...t}},[e,t])}function c(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(n):t.components||n:d(t.components),i.createElement(s.Provider,{value:e},t.children)}}}]);