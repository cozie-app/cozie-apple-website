"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[6204],{2210:(n,t,e)=>{e.r(t),e.d(t,{assets:()=>p,contentTitle:()=>c,default:()=>l,frontMatter:()=>a,metadata:()=>h,toc:()=>d});var i=e(4848),o=e(8453),s=e(6025);const a={id:"push_notifications",title:"Sending Push Notifications",sidebar_label:"Push Notifications",sidebar_position:1,slug:"push_notifications"},c=void 0,h={id:"push_notifications/push_notifications",title:"Sending Push Notifications",description:"You can send push notifications to the Cozie app using a web API as shown in the Python code example below.",source:"@site/docs/4_push_notifications/01_push_notifications.md",sourceDirName:"4_push_notifications",slug:"/push_notifications/push_notifications",permalink:"/docs/push_notifications/push_notifications",draft:!1,unlisted:!1,editUrl:"https://github.com/cozie-app/cozie-apple-website/tree/master/docs/4_push_notifications/01_push_notifications.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{id:"push_notifications",title:"Sending Push Notifications",sidebar_label:"Push Notifications",sidebar_position:1,slug:"push_notifications"},sidebar:"myAutogeneratedSidebar",previous:{title:"Phone Survey",permalink:"/docs/custom_surveys/custom_phone_survey"},next:{title:"Deployment Guide",permalink:"/docs/deployment/deployment"}},p={},d=[{value:"Push notifications with action buttons",id:"push-notifications-with-action-buttons",level:2}];function r(n){const t={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",...(0,o.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.p,{children:"You can send push notifications to the Cozie app using a web API as shown in the Python code example below."}),"\n",(0,i.jsxs)(t.p,{children:["Please note that you will have to specify your ",(0,i.jsx)(t.code,{children:"ID_PARTICIPANT"}),", ",(0,i.jsx)(t.code,{children:"ID_EXPERIMENT"}),", ",(0,i.jsx)(t.code,{children:"ID_PASSWORD"})," and ",(0,i.jsx)(t.code,{children:"API_KEY"}),".\nYou can request an ",(0,i.jsx)(t.code,{children:"API_KEY"})," by emailing us a request at ",(0,i.jsx)(t.a,{href:"mailto:cozie.app@gmail.com?subject=Cozie%20Apple%20API%20key%20request%20for%20push%20notifications",children:"cozie.app@gmail.com"}),"."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.code,{children:"ID_PARTICIPANT"})," and ",(0,i.jsx)(t.code,{children:"ID_EXPERIMENT"})," can be found in the 'Settings' tab of the Cozie iPhone app.\n",(0,i.jsx)(t.code,{children:"ID_PASSWORD"})," can be found in the 'Backend' tab of the Cozie iPhone app."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)("img",{alt:"Screenshot of Cozie Settings tab",src:(0,s.A)("img/cozie_settings_tab_ids.png"),width:"30%"})," \xa0\n",(0,i.jsx)("img",{alt:"Screenshot of Cozie Backend tab",src:(0,s.A)("img/cozie_backend_tab_id_participant.png"),width:"30%"})," \xa0"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-python",children:"# Credentials\nID_PARTICIPANT = 'ExternalUser'\nID_EXPERIMENT = 'AppleStore'\nID_PASSWORD = 'XXX'\nAPI_KEY = 'XXX'\nAPI_URL = 'https://69xmiejax4.execute-api.ap-southeast-1.amazonaws.com/prod/notification/'\n\n# Define payload\npayload= dict()\npayload['id_experiment'] = ID_EXPERIMENT\npayload['id_participant'] = ID_PARTICIPANT\npayload['id_password'] = ID_PASSWORD\npayload['message'] = 'test_message'\npayload['heading'] = 'test_heading'\npayload['subtitle'] = 'test_subtitle'\n\nheaders = {'x-api-key': API_KEY,\n          'Content-Type': 'application/json'}\n\nreq = requests.post(API_URL, headers=headers, json=payload)\n\nprint(req.status_code)\nprint(req.content)\n"})}),"\n",(0,i.jsxs)(t.p,{children:["The value in the ",(0,i.jsx)(t.code,{children:"text"})," fields is shown on the action buttons in push notification.\nThe value of the ",(0,i.jsx)(t.code,{children:"id"})," fields is logged with the other Cozie data under the column name ",(0,i.jsx)(t.code,{children:"action_button"}),"."]}),"\n",(0,i.jsx)(t.p,{children:"Push notifications are shown on the iPhone and/or Apple Watch depending on which device is used. The screenshots below show how the push notifications look on the iPhone and Apple Watch."}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)("img",{alt:"Screenshot of push notification on iPhone",src:(0,s.A)("img/push_notifications/push_notification_iphone.png"),width:"30%"})," \xa0\n",(0,i.jsx)("img",{alt:"Screenshot of push notification on Apple Watch",src:(0,s.A)("img/push_notifications/push_notification_apple_watch_cover.png"),width:"30%"})," \xa0\n",(0,i.jsx)("img",{alt:"Screenshot of push notification on Apple Watch",src:(0,s.A)("img/push_notifications/push_notification_apple_watch.png"),width:"30%"})," \xa0"]}),"\n",(0,i.jsx)(t.h2,{id:"push-notifications-with-action-buttons",children:"Push notifications with action buttons"}),"\n",(0,i.jsxs)(t.p,{children:["Buttons in the push notifications below the push notification message are called 'action buttons'. These can be shown by adding the ",(0,i.jsx)(t.code,{children:"buttons"})," field to the payload dictionary as shown below."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-python",children:"ID_PARTICIPANT = 'ExternalUser'\nID_EXPERIMENT = 'AppleStore'\nID_PASSWORD = 'XXX'\nAPI_KEY = 'XXX'\nAPI_URL = 'https://69xmiejax4.execute-api.ap-southeast-1.amazonaws.com/prod/notification/'\n\n# Define payload\npayload= dict()\npayload['id_experiment'] = ID_EXPERIMENT\npayload['id_participant'] = ID_PARTICIPANT\npayload['id_password'] = ID_PASSWORD\npayload['message'] = 'test_message'\npayload['heading'] = 'test_heading'\npayload['subtitle'] = 'test_subtitle'\npayload['buttons'] =[{'id': 'helpful',\n                      'text': 'Helpful'},\n                     {'id': 'not_helpful',\n                      'text': 'Not helpful'}\n                     ]\n\nheaders = {'x-api-key': API_KEY,\n          'Content-Type': 'application/json'}\n\nreq = requests.post(API_URL, headers=headers, json=payload)\n\nprint(req.status_code)\nprint(req.content)\n"})}),"\n",(0,i.jsx)(t.p,{children:"The screenshots below show how the push notifications with action buttons look on the iPhone and Apple Watch. The action buttons on the iPhone only show after the participant long-taps the push notification."}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)("img",{alt:"Screenshot of push notification on iPhone with action button",src:(0,s.A)("img/push_notifications/push_notification_iphone_action_button.png"),width:"30%"})," \xa0\n",(0,i.jsx)("img",{alt:"Screenshot of push notification on Apple Watch",src:(0,s.A)("img/push_notifications/push_notification_apple_watch_cover.png"),width:"30%"})," \xa0\n",(0,i.jsx)("img",{alt:"Screenshot of push notification on Apple Watch with action button",src:(0,s.A)("img/push_notifications/push_notification_apple_watch_action_button.png"),width:"30%"})," \xa0"]})]})}function l(n={}){const{wrapper:t}={...(0,o.R)(),...n.components};return t?(0,i.jsx)(t,{...n,children:(0,i.jsx)(r,{...n})}):r(n)}},8453:(n,t,e)=>{e.d(t,{R:()=>a,x:()=>c});var i=e(6540);const o={},s=i.createContext(o);function a(n){const t=i.useContext(s);return i.useMemo((function(){return"function"==typeof n?n(t):{...t,...n}}),[t,n])}function c(n){let t;return t=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:a(n.components),i.createElement(s.Provider,{value:t},n.children)}}}]);