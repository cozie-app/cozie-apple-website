"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5605],{3905:function(e,t,a){a.d(t,{Zo:function(){return p},kt:function(){return m}});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),d=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},p=function(e){var t=d(e.components);return n.createElement(s.Provider,{value:t},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},f=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=d(a),f=r,m=u["".concat(s,".").concat(f)]||u[f]||c[f]||o;return a?n.createElement(m,i(i({ref:t},p),{},{components:a})):n.createElement(m,i({ref:t},p))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=f;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[u]="string"==typeof e?e:r,i[1]=l;for(var d=2;d<o;d++)i[d]=a[d];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}f.displayName="MDXCreateElement"},1934:function(e,t,a){a.r(t),a.d(t,{assets:function(){return p},contentTitle:function(){return s},default:function(){return f},frontMatter:function(){return l},metadata:function(){return d},toc:function(){return u}});var n=a(7462),r=a(3366),o=(a(7294),a(3905)),i=(a(4996),["components"]),l={id:"downloadData",title:"Download Data",sidebar_label:"Download Data"},s=void 0,d={unversionedId:"downloadData",id:"downloadData",title:"Download Data",description:"Download the data collected using the Cozie Apple Watch survey",source:"@site/docs/downloadData.md",sourceDirName:".",slug:"/downloadData",permalink:"/docs/downloadData",draft:!1,editUrl:"https://github.com/cozie-app/cozie-apple-website/tree/master/docs/downloadData.md",tags:[],version:"current",frontMatter:{id:"downloadData",title:"Download Data",sidebar_label:"Download Data"},sidebar:"someSidebar",previous:{title:"Setup",permalink:"/docs/setup"},next:{title:"Features",permalink:"/docs/dd_features"}},p={},u=[{value:"Download the data collected using the Cozie Apple Watch survey",id:"download-the-data-collected-using-the-cozie-apple-watch-survey",level:2},{value:"Watch survey data",id:"watch-survey-data",level:3},{value:"Physiological data",id:"physiological-data",level:3},{value:"Features &amp; watch surveys",id:"features--watch-surveys",level:2}],c={toc:u};function f(e){var t=e.components,a=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"download-the-data-collected-using-the-cozie-apple-watch-survey"},"Download the data collected using the Cozie Apple Watch survey"),(0,o.kt)("p",null,"You can download the data you have collected using the Cozie Apple Watch survey using the following Python code.\nPlease note that you will have to specify your ",(0,o.kt)("inlineCode",{parentName:"p"},"ID_PARTICIPANT"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"ID_EXPERIMENT")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"API_KEY"),".\nYou can request an ",(0,o.kt)("inlineCode",{parentName:"p"},"API_KEY")," by emailing us a request at ",(0,o.kt)("a",{parentName:"p",href:"mailto:cozie.app@gmail.com"},"cozie.app@gmail.com")),(0,o.kt)("p",null,"All the data you have queried are saved inside the Pandas dataframe called ",(0,o.kt)("inlineCode",{parentName:"p"},"df"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"import requests\nimport json\nimport pandas as pd\nimport matplotlib.pyplot as plt\n\n# Settings\nYOUR_TIMEZONE = 'Asia/Singapore'\nID_PARTICIPANT = 'ExternalUser'\nID_EXPERIMENT = 'AppleStore'\nWEEKS = \"2\"  # Number of weeks from which the data is retrived, starting from now\nAPI_KEY = '' # reach out to cozie.app@gmail.com for an API_KEY\n\n# Query data\npayload = {'id_participant': ID_PARTICIPANT,'id_experiment': ID_EXPERIMENT, 'weeks': WEEKS}\nheaders = {\"Accept\": \"application/json\", 'x-api-key': API_KEY}\nresponse = requests.get('https://m7cy76lxmi.execute-api.ap-southeast-1.amazonaws.com/default/cozie-apple-researcher-read-influx', params=payload, headers=headers)\ndata = json.loads(response.content)\n\n# Convert response in Pandas Dataframe\ndf = pd.DataFrame.from_dict(data).T\ndf.index = pd.to_datetime(df.index, unit='ms')\ndf.index = df.index.tz_localize('UTC').tz_convert(YOUR_TIMEZONE)\npd.options.display.max_columns = None\n\n# Display dataframe\ndf.head()\n")),(0,o.kt)("h3",{id:"watch-survey-data"},"Watch survey data"),(0,o.kt)("p",null,"If you want to focus on the analysis of the watch-based survey data use the code below to filter the dataframe retrieved above."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'# Get only question flow responses\ndf_questions = df[~df["vote_count"].isna()]\ndf_questions.style\n')),(0,o.kt)("h3",{id:"physiological-data"},"Physiological data"),(0,o.kt)("p",null,"Use the code below to plot noise and heart rate data contained in the dataframe retrieved above. "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'# Plot time-series data\nfig, ax = plt.subplots(1,2, figsize =(15, 7))\n\n# Heart rate\ndf["heart_rate"].plot(ax=ax[0], style=\'.\')\nax[0].set_title("Heart Rate", fontsize=18)\nax[0].set_ylabel("Heart Rate [bpm]", fontsize=14)\nax[0].set_xlabel("Time", fontsize=14)\n\n# Sound pressure\ndf["sound_pressure"].plot(ax=ax[1], style=\'.\')\nax[1].set_title("Sound Pressure", fontsize=18)\nax[1].set_ylabel("Sound Pressure [dB?]", fontsize=14)\nax[1].set_xlabel("Time", fontsize=14)\n')),(0,o.kt)("h2",{id:"features--watch-surveys"},"Features & watch surveys"),(0,o.kt)("p",null,"The description for all features and the watch survey questions are available on separate pages:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"dd_features"},"Features")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"dd_ws_thermal_short"},"Thermal (short)")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"dd_ws_thermal_long"},"Thermal (long)")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"dd_ws_noise_and_privacy"},"Noise and Privacy")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"dd_ws_infection_risk"},"Infection Risk")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"dd_ws_movement"},"Movement")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"dd_ws_privacy"},"Privacy"))))}f.isMDXComponent=!0}}]);