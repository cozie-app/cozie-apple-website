"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[7844],{3905:function(e,t,a){a.d(t,{Zo:function(){return c},kt:function(){return h}});var n=a(7294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var l=n.createContext({}),p=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},c=function(e){var t=p(e.components);return n.createElement(l.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,r=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=p(a),m=i,h=u["".concat(l,".").concat(m)]||u[m]||d[m]||r;return a?n.createElement(h,o(o({ref:t},c),{},{components:a})):n.createElement(h,o({ref:t},c))}));function h(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=a.length,o=new Array(r);o[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:i,o[1]=s;for(var p=2;p<r;p++)o[p]=a[p];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},1128:function(e,t,a){a.r(t),a.d(t,{assets:function(){return c},contentTitle:function(){return l},default:function(){return h},frontMatter:function(){return s},metadata:function(){return p},toc:function(){return u}});var n=a(7462),i=a(3366),r=(a(7294),a(3905)),o=(a(4996),["components"]),s={id:"design_decisions",title:"Design Decisions",sidebar_label:"Design Decisions",sidebar_position:2},l=void 0,p={unversionedId:"customize_cozie_app/design_decisions",id:"customize_cozie_app/design_decisions",title:"Design Decisions",description:"On this page we list some of decisions we made during the development of Cozie. It should help inform further development and document how Cozie came to work how it works today.",source:"@site/docs/6_customize_cozie_app/02_design_decisions.md",sourceDirName:"6_customize_cozie_app",slug:"/customize_cozie_app/design_decisions",permalink:"/docs/customize_cozie_app/design_decisions",draft:!1,editUrl:"https://github.com/cozie-app/cozie-apple-website/tree/master/docs/6_customize_cozie_app/02_design_decisions.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{id:"design_decisions",title:"Design Decisions",sidebar_label:"Design Decisions",sidebar_position:2},sidebar:"myAutogeneratedSidebar",previous:{title:"Customize Cozie",permalink:"/docs/customize_cozie_app/customize_cozie"},next:{title:"Troubleshooting",permalink:"/docs/troubleshooting"}},c={},u=[],d={toc:u},m="wrapper";function h(e){var t=e.components,a=(0,i.Z)(e,o);return(0,r.kt)(m,(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"On this page we list some of decisions we made during the development of Cozie. It should help inform further development and document how Cozie came to work how it works today."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"InfluxDB"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"The main reason for using InfluxDB is that you can add new columns (fields) to tables (measurements) on the fly. Logging additional HealthKit data or adding new watch surveys works without any modifications to the database."),(0,r.kt)("li",{parentName:"ul"},"Similarly retrieving of data can be done with one simple ",(0,r.kt)("inlineCode",{parentName:"li"},"SELECT")," query no joining and merging of data is necessary. Further, in our experience researchers want to download all the data for a participant or and group of participants at once. There is very little need for filtering when retrieving data from the database. A little bit of filtering can be helpful for monitoring the inflow of data. In this case, only the most recent (~week) of data is relevant and retrieving a bit less data can speed up the query."),(0,r.kt)("li",{parentName:"ul"},"We are using a cloud subscription from Influx. Hence, the database is managed by Influx. In case of any issues, there are daily snapshots available"),(0,r.kt)("li",{parentName:"ul"},"It has proven to be good practice to group data by experiment. Hence, we create a new table (measurement) for each experiment ID. This contains any potential data type issue to one experiment and data can also easily be deleted by dropping a table (measurement). "))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"AWS"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"AWS was chosen because it was the service that offered the most opens at the time. However, now, the whole backend could also be implemented other services, e.g., Azure, Google Cloud. Alternatively, it could also be run on dedicated hardware."),(0,r.kt)("li",{parentName:"ul"},"AWS takes care of all hardware management. "),(0,r.kt)("li",{parentName:"ul"},"Using serverless approach, with AWS Lambda functions keeps issues isolated to individual lambda functions and doesn't crash the entire backend. It is reasonably easy to debug and maintain."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Python"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Python is popular in research. For the sake of simplicity, all code that could be written was written in Python. The Cozie Apple app is written in Swift was there is no alternative."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Phone survey"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"The phone survey allows for longer questions and answers but is more intrusive. There are many online survey services available, e.g., Qualtrix, Google Forms, Survey Monkey. These services work well on phones and offer a plethora of answer options, e.g., single choice, multiple choice, sliders, point scales, free text, etc..\nThese various answers options were also requested by various collaborators.\nInstead of replicating these services, we decided to use them in the app and focus on the watch survey and retrieval of HealthKit data."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Backup file"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"The backup has two main purposes. Firstly, it serves as a backup for the data sent to the backend. Secondly, it allows for the Cozie app to work without the backend in cases where we stop operate the backend or researchers cannot use our backend, e.g., for local data privacy regulation. Nevertheless, we recommend using the log file as backup in addition to sending data to the backend."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"In app data visualization"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Version 2 of the Cozie app had a data page with some data visualization. For the sake of simplicity, the data insight was reduced to three text fields on the data page."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"User management"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"}))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"ResearchKit"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"}))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Limitations and design issues"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Currently, the datatype of fields needs to be enforced in the backend to avoid issues. Ideally, the field type should be included in the payload."),(0,r.kt)("li",{parentName:"ul"},"Retrieval of data by researchers requires the creation of an API Key. This creates a bit of work and also housekeeping. Ideally, researchers could retrieve the data without interaction with the Cozie team. A potential solution is to use the ",(0,r.kt)("inlineCode",{parentName:"li"},"id_password")," field as password for data retrieval.")))))}h.isMDXComponent=!0}}]);